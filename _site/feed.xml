<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="http://localhost:4000/TCRS/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/TCRS/" rel="alternate" type="text/html" /><updated>2024-03-03T13:49:58+08:00</updated><id>http://localhost:4000/TCRS/feed.xml</id><title type="html">Home</title><subtitle>系統會記錄玩家排名，並顯示在網站上。你可以隨時查看自己的積分和排名，並與其他玩家競爭。
</subtitle><author><name>LiXiang</name></author><entry><title type="html">Open Source</title><link href="http://localhost:4000/TCRS/jekyll/2024-03-03-Open-Source.html" rel="alternate" type="text/html" title="Open Source" /><published>2024-03-03T00:00:00+08:00</published><updated>2024-03-03T00:00:00+08:00</updated><id>http://localhost:4000/TCRS/jekyll/Open%20Source</id><content type="html" xml:base="http://localhost:4000/TCRS/jekyll/2024-03-03-Open-Source.html"><![CDATA[<hr />
<h1 id="accessing-the-cr-api-using-python">Accessing the CR API using Python</h1>

<p>Users must obtain the corresponding API key to use. Please go to <a href="https://developer.clashroyale.com/#/">https://developer.clashroyale.com/#/</a></p>

<p>If you like my work, please go to the GitHub repository <a href="https://github.com/Xiang511/CR-API">Xiang511/CR-API</a> to star this project.</p>

<h2 id="features">Features</h2>
<ul>
  <li>Search Clan information =&gt; FindClan.py</li>
  <li>Search Player information =&gt; Player.py</li>
  <li>Search local rankings =&gt; LocalRankings.py</li>
  <li>Search player achievement records =&gt; PlayerProfile.py</li>
</ul>

<h2 id="under-development">Under development</h2>
<ul>
  <li>Implement a GUI</li>
</ul>

<hr />
<h2 id="example-usage">Example Usage</h2>
<p>Here are some example code samples.</p>

<p>More code can be found on <a href="https://github.com/Xiang511/CR-API">GitHub</a></p>

<p>DEMO <a href="https://www.youtube.com/watch?v=BKnR_kre6QI&amp;ab_channel=XiangFang">YouTube</a></p>

<h3 id="findclanpy">FindClan.py</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import requests
import pandas as pd
import time

#Calculate starting time
start_time = time.time()

# Enter your key
# Go to https://developer.clashroyale.com/#/ 

API_KEY = ""
headers = {
    "Authorization": "Bearer {}".format(API_KEY)
}

# GET ClanTag
#ex: %23QCRY22P8

clan_tag = "%23QCRY22P8"


url = "https://api.clashroyale.com/v1/clans/{}".format(clan_tag)
response = requests.get(url, headers=headers)


try:
    if response.status_code == 200:
        clan = response.json()

        df = pd.DataFrame(clan["memberList"])
        df.to_excel("FindClan.xlsx")

        
        end_time = time.time()
        
        print(f"Time：{end_time - start_time}")
    else:
        print(response.status_code)
except Exception as e:
    print(e)
</code></pre></div></div>
<hr />
<h3 id="playerpy">Player.py</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import openpyxl
import requests
import json
import time
from tqdm import tqdm

#Calculate starting time
start_time = time.time()

# Enter your key
# Go to https://developer.clashroyale.com/#/ 
API_KEY = ""

headers = {
    "Authorization": "Bearer {}".format(API_KEY)
}

# enter your tag
# ex: '%2322R920J00','%2312345678'

player_tags = ["%2322R920J00", "%23V99082R9C"]



wb = openpyxl.Workbook()
ws = wb.active

ws["A1"] = "Tag"
ws["B1"] = "BEST"
ws["C1"] = "LAST"


def clean_result(result):
    if result is None:
        return ""
    return result[result.rfind(" ") + 1:].split("}")[0]
#ex:
#   best = json.dumps(player_data.get("bestPathOfLegendSeasonResult"))
#   回傳值為{"leagueNumber": 10, "trophies": 2416, "rank": 2573}
#
#   另 best2 = clean_result(best)
#   則 best2 = 2573

for player_tag in tqdm(player_tags):

    response = requests.get(f"https://api.clashroyale.com/v1/players/{player_tag}", headers=headers)
    
    player_data = response.json()

    best = json.dumps(player_data.get("bestPathOfLegendSeasonResult"))
    last = json.dumps(player_data.get("lastPathOfLegendSeasonResult"))

    best2 = clean_result(best)
    last2= clean_result(last)

    ws.append([
    player_data["name"],
    best2,
    last2])

wb.save("Player.xlsx")

#Calculate end time
end_time = time.time()
print(f"Time：{end_time - start_time}")
</code></pre></div></div>
<hr />
<h3 id="localranking">LocalRanking</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import requests
import openpyxl
import datetime
import time
from tqdm import tqdm

#Calculate starting time
start_time = time.time()

#Enter your key
#Go to https://developer.clashroyale.com/#/ 

API_KEY = ""
headers = {
    "Authorization": "Bearer {}".format(API_KEY)
}

response = requests.get(
    "https://api.clashroyale.com/v1/locations/57000228/pathoflegend/players",
    headers=headers,
)

#How do I know my area code? ex:57000228
#Check Area Code File

#Get Time
now = datetime.datetime.now()
now_str = now.strftime("%Y-%m-%d")

wb = openpyxl.Workbook() 
ws = wb.active

ws.cell(row=1, column=1).value = "ID"
ws.cell(row=1, column=2).value = "Name"
ws.cell(row=1, column=3).value = "Rating"

row_number = 2
for player in tqdm(response.json()["items"]):
    ws.cell(row=row_number, column=1).value = player["tag"]
    ws.cell(row=row_number, column=2).value = player["name"]
    ws.cell(row=row_number, column=3).value = player["eloRating"]
    row_number += 1

wb.save(now_str+".xlsx")

#Calculate end time
end_time = time.time()
print(f"Time：{end_time - start_time}")
</code></pre></div></div>

<hr />
<h3 id="playerprofile">PlayerProfile</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import openpyxl
import requests
import time
from tqdm import tqdm

#Calculate starting time
start_time = time.time()

#Enter your key
#Go to https://developer.clashroyale.com/#/ 

API_KEY = ""
headers = {
    "Authorization": "Bearer {}".format(API_KEY)
}

#Enter your tag
#ex: '%2322R920J00','%2312345678'

player_tags = ['%2322R920J00']
              
wb = openpyxl.Workbook()
ws = wb.active

ws["A1"] = "Tag"
ws["B1"] = "Classic12Wins"
ws["C1"] = "Grand12Wins"
ws["D1"] = "YearsPlayed"
ws["E1"] = "EmoteCollection"
ws["F1"] = "BannerCollection"
ws["G1"] = "starPoints"
ws["H1"] = "totalExpPoints"


for player_tag in tqdm(player_tags):
    response = requests.get(f"https://api.clashroyale.com/v1/players/{player_tag}", headers=headers)
    
    player_data = response.json()

    Classic12WinsCout =0 
    Grand12WinsCout = 0

    starPoints = player_data["starPoints"]
    totalExpPoints = player_data["totalExpPoints"]
    
    for Classic12Wins in player_data["badges"]:
       if Classic12Wins["name"] == "Classic12Wins":
        Classic12WinsCout = Classic12Wins["progress"]

    for Grand12Wins in player_data["badges"]:
       if Grand12Wins["name"] == "Grand12Wins":
        Grand12WinsCout = Grand12Wins["progress"]

    for YearsPlayed in player_data["badges"]:
       if YearsPlayed["name"] == "YearsPlayed":
        YearsPlayedCout = YearsPlayed["progress"]

    for EmoteCollection in player_data["badges"]:
       if EmoteCollection["name"] == "EmoteCollection":
        EmoteCollectionCout = EmoteCollection["progress"]

    for BannerCollection in player_data["badges"]:
       if BannerCollection["name"] == "BannerCollection":
        BannerCollectionCout = BannerCollection["progress"]


    # for PracticewithFriendsCout in player_data["achievements"]:
    #   if PracticewithFriendsCout["name"] == "Practice with Friends":
    #     PracticewithFriendsCoutCout = PracticewithFriendsCout["value"]

    ws.append([
    player_data["name"],Classic12WinsCout,Grand12WinsCout,YearsPlayedCout,EmoteCollectionCout,BannerCollectionCout,starPoints,totalExpPoints
    ])

wb.save("PlayerProfile.xlsx")

#Calculate end time
end_time = time.time()
print(f"Time：{end_time - start_time}")
</code></pre></div></div>

<h2 id="license">License</h2>

<p><img src="https://img.shields.io/github/license/Xiang511/CR-API?style=for-the-badge" alt="GitHub License" /></p>]]></content><author><name>LiXiang</name></author><category term="Jekyll" /><summary type="html"><![CDATA[Accessing the CR API using Python]]></summary></entry><entry><title type="html">All releases</title><link href="http://localhost:4000/TCRS/jekyll/2024-03-01-AllReleases.html" rel="alternate" type="text/html" title="All releases" /><published>2024-03-01T00:00:00+08:00</published><updated>2024-03-01T00:00:00+08:00</updated><id>http://localhost:4000/TCRS/jekyll/AllReleases</id><content type="html" xml:base="http://localhost:4000/TCRS/jekyll/2024-03-01-AllReleases.html"><![CDATA[<hr />

<h2 id="v132">V1.3.2</h2>
<p>2024-2-25 V1.3.2</p>

<ul>
  <li>新增
 網站導覽介紹 Driver.js</li>
</ul>

<blockquote class="block-tip">
  <p><strong>最新版本↑↑</strong></p>
</blockquote>

<hr />

<h2 id="v131">V1.3.1</h2>
<p>2024-2-17 V1.3.1</p>

<ul>
  <li>
    <p>新增
 即時申請紀錄 (版本記錄頁面)
 使用者可以查看資料何時被記錄</p>
  </li>
  <li>
    <p>首頁UI更動</p>
  </li>
</ul>

<hr />

<h2 id="v13">V1.3</h2>
<p>2024-2-10 V1.3</p>

<ul>
  <li>
    <p>新增
 個人成就頁面</p>
  </li>
  <li>
    <p>個人成就頁面紀錄
 | 經典挑戰 | 終極挑戰 | 遊玩時間 | 表情收集 | 戰旗收集 | 星光點數 | 全部經驗值</p>
  </li>
</ul>

<hr />

<h2 id="v122">V1.2.2</h2>
<p>2023-12-22 V1.2.2</p>

<ul>
  <li>新增”流體力學”官方網站</li>
  <li>調整統計圖表位置</li>
</ul>

<hr />

<h2 id="v121">V1.2.1</h2>
<p>2023-12-17 V1.2.1</p>

<ul>
  <li>新增
 程式碼開源網站</li>
</ul>

<hr />

<h2 id="v12">V1.2</h2>
<p>2023-11-12 V1.2</p>

<ul>
  <li>
    <p>新增
 統計圖表</p>
  </li>
  <li>
    <p>生涯紀錄
 新增天梯排名(2022年10月26日以前)</p>
  </li>
</ul>

<hr />

<h2 id="v11">V1.1</h2>
<p>2023-11-08 V1.1</p>

<ul>
  <li>
    <p>新增
 首頁</p>
  </li>
  <li>
    <p>版本紀錄
 新增目前版本資訊
 新增未來更新時間
 新增目前紀錄人數</p>
  </li>
  <li>
    <p>天梯紀錄
 移除更新時間</p>
  </li>
  <li>
    <p>生涯紀錄
 移除更新時間</p>
  </li>
</ul>

<hr />

<h2 id="v10">V1.0</h2>
<p>2023-11-06 V1.0</p>

<ul>
  <li>
    <p>新增
 關於我們
 版本紀錄
 giscus評論插件
 SiteStates計數器</p>
  </li>
  <li>
    <p>優化
 天梯紀錄表格
 生涯紀錄表格</p>
  </li>
  <li>
    <p>刪除
 聊天室</p>
  </li>
</ul>]]></content><author><name>LiXiang</name></author><category term="Jekyll" /><summary type="html"><![CDATA[]]></summary></entry></feed>